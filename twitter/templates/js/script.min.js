window.onload=function(){if(void 0===e){var e={};e.name=document.getElementById("screen"),e.description=document.getElementById("Card-des"),e.location=document.getElementById("Card-location");var n={};n.name=document.querySelector("input.textbox.name"),n.description=document.querySelector("input.textbox.description"),n.location=document.querySelector("input.textbox.location"),n.name.addEventListener("keypress",function(){setTimeout(function(){e.name.innerHTML=n.name.value},1)}),n.name.addEventListener("change",function(){setTimeout(function(){e.name.innerHTML=n.name.value},1)}),n.name.addEventListener("paste",function(){setTimeout(function(){e.name.innerHTML=n.name.value},1)}),n.description.addEventListener("keypress",function(){setTimeout(function(){e.description.innerHTML=n.description.value},1)}),n.description.addEventListener("change",function(){setTimeout(function(){e.description.innerHTML=n.description.value},1)}),n.description.addEventListener("paste",function(){setTimeout(function(){e.description.innerHTML=n.description.value},1)}),n.location.addEventListener("keypress",function(){setTimeout(function(){e.location.innerHTML=n.location.value},1)}),n.location.addEventListener("change",function(){setTimeout(function(){e.location.innerHTML=n.location.value},1)}),n.location.addEventListener("paste",function(){setTimeout(function(){e.location.innerHTML=n.location.value},1)})}};
window.onload=function(){if(void 0===e){var e={};e.name=document.querySelector("div.name.counter"),e.description=document.querySelector("div.description.counter"),e.location=document.querySelector("div.location.counter");var n={};function t(e,n){$(e).val().length<=n?$(e).removeClass("overlength"):$(e).addClass("overlength")}n.name=document.querySelector("input.textbox.name"),n.description=document.querySelector("input.textbox.description"),n.location=document.querySelector("input.textbox.location"),$("input.textbox.name").on("keypress keyup change paste",function(){e.name.innerHTML=n.name.value.length,t("input.textbox.name",50)}),$("input.textbox.description").on("keypress keyup change paste",function(){e.description.innerHTML=n.description.value.length,t("input.textbox.description",100)}),$("input.textbox.location").on("keypress keyup change paste",function(){e.location.innerHTML=n.location.value.length,t("input.textbox.location",200)})}};
$(function(){var t={};t.name=$("input.textbox.name").attr("placeholder"),t.description=$("input.textbox.description").attr("placeholder"),t.location=$("input.textbox.location").attr("placeholder"),$("input.textbox").on("keypress change paste",function(){null!=t.name&&null!=t.description&&null!=t.location&&t.name==$("input.textbox.name").val()&&t.description==$("input.textbox.description").val()&&t.location==$("input.textbox.location").val()?$("button.button.submit").attr("disabled",!0):$("button.button.submit").removeAttr("disabled")}),$("button.button.submit").on("click",function(){return function(){if($("button.button.submit").is(":disabled"))return!1;$("button.button.submit").attr("disabled",!0);var n={};t.name!=$("input.textbox.name").val()&&(n.name=$("input.textbox.name").val()),t.description!=$("input.textbox.description").val()&&(n.description=$("input.textbox.description").val()),t.location!=$("input.textbox.location").val()&&(n.location=$("input.textbox.location").val()),$("input#allow_tweet").is(":checked")&&(n.tweet=!0),console.log(JSON.stringify(n)),$.ajax({url:"/twitter/setStatus",type:"POST",data:JSON.stringify(n),dataType:"json",contentType:"application/json; charset=utf-8"}).then(function(n){console.log("送信成功"),$("input.textbox.name").val(n.nam),$("input.textbox.description").val(n.des),$("input.textbox.location").val(n.loc),$("#screen").text(n.nam),$("#Card-des").text(n.des),$("#Card-location").text(n.loc),t.name=n.nam,t.description=n.des,t.location=n.loc}).catch(function(){console.log("送信失敗")}).then(function(){$("button.button.submit").removeAttr("disabled")})}(),!1})});